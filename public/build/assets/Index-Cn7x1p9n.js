import{V as u,d as x,j as e,M as j,r,U as m,E as g,c as y}from"./app-BdyLqLlc.js";import{C as b}from"./index-CKdL8VZm.js";import{a as f}from"./index-B7gYL_ii.js";import{A as N}from"./AuthenticatedLayout-C8D8eUzt.js";import"./NavLink-BvgaK94k.js";const S=()=>{const{plans:i}=u().props,[a,p]=x.useState({column:"",direction:"asc"}),o=s=>{p(t=>{const n=t.column===s&&t.direction==="asc"?"desc":"asc";return{column:s,direction:n}})},d=x.useMemo(()=>{if(!i)return[];const s=[...i];return a.column&&s.sort((t,n)=>{let l=t[a.column],c=n[a.column];return a.column==="plan_price"&&(l=Number(l),c=Number(c)),l<c?a.direction==="asc"?-1:1:l>c?a.direction==="asc"?1:-1:0}),s},[i,a]),h=async s=>{if(window.confirm("Are you sure you want to delete this plan?"))try{const n=await y.delete(`/admin/plans/${s}`);alert(n.data.message)}catch(n){console.error(n),alert("An unexpected error occurred. Please try again later.")}};return e.jsxs(N,{children:[e.jsx(j,{title:"CFS INTERNET NETWORK SOLUTIONS"}),e.jsx("div",{className:"bg-white overflow-y-auto max-h-[550px]",children:e.jsxs("div",{className:"mt-5 px-52",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(r.Typography,{variant:"lead",className:"mb-0 text-lg font-bold",children:"Plans"}),e.jsx(r.Typography,{className:"text-sm",children:"Manage plans"})]}),e.jsx("div",{children:e.jsx(m,{href:"/admin/plans/create",children:e.jsxs(r.Button,{className:"flex gap-2 items-center",color:"blue",size:"md",children:[e.jsx(f,{className:"text-lg"}),"Create Plan"]})})})]}),e.jsx("div",{className:"flex-1 p-4 overflow-x-auto",children:e.jsx("div",{className:"min-w-[550px]",children:e.jsxs("table",{className:"w-full text-left border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{onClick:()=>o("mbps"),className:`px-6 py-3 text-sm font-semibold bg-gray-300 
                                            text-gray-700 uppercase border border-gray-400
                                            cursor-pointer select-none`,children:e.jsxs(r.Typography,{variant:"small",color:"blue-gray",className:"text-[12px] font-normal leading-none opacity-70 flex items-center gap-1",children:["Mbps",a.column==="mbps"&&(a.direction==="asc"?"▲":"▼")]})}),e.jsx("th",{onClick:()=>o("plan_price"),className:`px-6 py-3 text-sm font-semibold bg-gray-300 
                                            text-gray-700 uppercase border border-gray-400
                                            cursor-pointer select-none`,children:e.jsxs(r.Typography,{variant:"small",color:"blue-gray",className:"text-[12px] font-normal leading-none opacity-70 flex items-center gap-1",children:["Plan Price",a.column==="plan_price"&&(a.direction==="asc"?"▲":"▼")]})}),e.jsx("th",{className:"w-[15%] px-6 py-3 text-sm font-semibold bg-gray-300 text-gray-700 uppercase border border-gray-400",children:e.jsx(r.Typography,{variant:"small",color:"blue-gray",className:"text-[12px] font-normal leading-none opacity-70",children:""})})]})}),e.jsx("tbody",{children:e.jsx(g,{data:["plans"],fallback:e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"border p-4",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(r.Spinner,{className:"h-8 w-8",color:"green"})})})}),children:d.length>0?d.map((s,t)=>e.jsxs("tr",{className:"hover:bg-blue-gray-50",children:[e.jsx("td",{className:"border px-4 py-1",children:e.jsx(r.Typography,{variant:"small",className:"text-gray-800 text-[13px]",children:`${s.mbps} mbps`})}),e.jsx("td",{className:"border px-4",children:e.jsx(r.Typography,{variant:"small",className:"font-normal text-gray-800 text-[13px]",children:Number(s.plan_price).toLocaleString("en-PH",{style:"currency",currency:"PHP"})})}),e.jsx("td",{className:"border px-4",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(r.Menu,{children:[e.jsx(r.MenuHandler,{children:e.jsx(r.IconButton,{variant:"text",children:e.jsx(r.Tooltip,{content:"Actions",children:e.jsx("img",{src:"/img/dots.png",alt:""})})})}),e.jsxs(r.MenuList,{children:[e.jsx(m,{className:"hover:bg-blue-800 hover:text-white",href:route("plans.edit",{id:s.id}),children:e.jsx(r.MenuItem,{children:"Edit"})}),e.jsx(r.MenuItem,{children:e.jsx("span",{onClick:()=>h(s.id),children:"Delete"})})]})]})})})]},t)):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"border p-4 text-center text-red-500",children:e.jsxs("div",{className:"flex justify-center items-center gap-2",children:["No plan records found",e.jsx(b,{className:"text-xl"})]})})})})})]})})})]})})]})};export{S as default};
