import{a as s,j as e,M as S,r as B,c as I}from"./app-BdyLqLlc.js";import{A as E}from"./AuthenticatedLayout-C8D8eUzt.js";import{l as w}from"./index-BzPIjsZP.js";import{U as C}from"./UseAppUrl-CjQRC-du.js";import"./NavLink-BvgaK94k.js";import"./index-B7gYL_ii.js";const M=()=>{var h;const b=C();s.useState("");const[a,d]=s.useState(null),[l,y]=s.useState(""),[c,u]=s.useState(""),[o,j]=s.useState(new Date().getFullYear()),[i,x]=s.useState(!1),p=s.useRef(),g=w.useReactToPrint({contentRef:p}),N={"n/a":"N/A",january:"JAN BILL",february:"FEB BILL",march:"MAR BILL",april:"APR BILL",may:"MAY BILL",june:"JUN BILL",july:"JUL BILL",august:"AUG BILL",september:"SEP BILL",october:"OCT BILL",november:"NOV BILL",december:"DEC BILL"},L=[{value:"",label:"All Months"},{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],v=Array.from({length:5},(r,t)=>new Date().getFullYear()-t),f=r=>{r.key==="Enter"&&(r.preventDefault(),m())},m=async()=>{if(l){x(!0);try{const r=await I.get(`${b}/api/customer_soa`,{params:{search:l,month:c,year:o}});d(r.data.customer)}catch(r){console.error("Error fetching SOA:",r),d(null)}finally{x(!1)}}};return e.jsxs(E,{children:[e.jsx(S,{title:"CFS INTERNET NETWORK SOLUTIONS"}),e.jsxs("div",{className:"max-w-4xl mx-auto mt-6 mb-4 flex flex-wrap gap-2 items-center",children:[e.jsx("input",{type:"text",placeholder:"Enter Firstname / Lastname...",value:l,onChange:r=>y(r.target.value),onKeyDown:f,className:"border border-gray-400 rounded-md px-3 py-2 w-[280px]"}),e.jsx("select",{value:c,onChange:r=>u(r.target.value),className:"border border-gray-400 rounded-md px-3 py-2",children:L.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))}),e.jsx("select",{value:o,onChange:r=>j(r.target.value),className:"border border-gray-400 rounded-md px-3 py-2",children:v.map(r=>e.jsx("option",{value:r,children:r},r))}),e.jsx("button",{onClick:m,className:"bg-blue-600 hover:bg-sky-700 text-white px-4 py-2 rounded-md",children:"Search"}),e.jsx(B.Button,{variant:"gradient",className:"w-[180px]",color:"green",onClick:()=>g(),children:"Print"})]}),i&&e.jsx("div",{className:"p-8 text-center text-gray-600",children:"Loading..."}),!i&&a===null&&l&&e.jsxs("div",{className:"p-8 text-center text-red-500",children:["No data found for: ",l]}),a&&e.jsx("div",{className:"overflow-y-auto max-h-[590px] bg-white text-black max-w-4xl mx-auto border border-gray-400 shadow-md",children:e.jsxs("div",{ref:p,className:"p-8",children:[e.jsxs("div",{className:"flex space-x-4 align-middle",children:[e.jsx("img",{src:"/img/logo.png",alt:"CFS Logo",className:"w-20 h-20 object-contain"}),e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsx("h1",{className:"font-bold text-[16px]",children:"CFS INTERNET NETWORK SOLUTIONS"}),e.jsx("p",{className:"text-[14px]",children:"#4 F.B BUILDING CAYABA ST."}),e.jsx("p",{className:"text-[14px]",children:"DISTRICT II, TUMAUINI, ISABELA"}),e.jsx("p",{className:"text-[14px]",children:"TIN: 295-973-965-001"}),e.jsx("p",{className:"text-[14px]",children:"CP#: 09453367030"})]})]}),e.jsxs("div",{className:"space-y-3 mt-10 mb-6",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Printed Date:"})," ",e.jsx("span",{children:(()=>{const r=new Date,t=r.toLocaleDateString("en-GB",{day:"2-digit"}),n=r.toLocaleDateString("en-GB",{month:"short"}),A=r.getFullYear();return`${t} - ${n} - ${A}`})()})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Account No.:"})," ",e.jsx("span",{children:a.id})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Customer Name:"})," ",e.jsx("span",{children:`${a.firstname} ${a.lastname}`})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Contact No:"})," ",e.jsx("span",{children:a.contact_no})]})]}),a.customer_plans.length>0&&e.jsxs("table",{className:"w-full border-collapse border border-gray-400 text-sm mb-8",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Date of Registration"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Day of Billing"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"MBPS"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Plan Price"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-2 py-1 h-8 text-center",children:a.customer_plans[0].date_registration}),e.jsx("td",{className:"border border-gray-400 px-2 py-1 text-center",children:a.customer_plans[0].date_billing}),e.jsx("td",{className:"border border-gray-400 px-2 py-1 text-center",children:a.customer_plans[0].plan.mbps}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1 text-center",children:["₱",a.customer_plans[0].plan.plan_price]})]})})]}),e.jsx("h3",{className:"text-center font-bold mb-2",children:"STATEMENT OF ACCOUNT"}),e.jsxs("table",{className:"w-full border-collapse border border-gray-400 text-sm mb-12",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-400 px-1 py-1",children:"Bill No."}),e.jsx("th",{className:"border border-gray-400 px-1 py-1",children:"Month/Year"}),e.jsx("th",{className:"border border-gray-400 px-1 py-1",children:"Description"}),e.jsx("th",{className:"border border-gray-400 px-1 py-1",children:"Billing Date"}),e.jsx("th",{className:"border border-gray-400 px-1 py-1",children:"Plan Price"}),e.jsx("th",{className:"border border-gray-400 px-1 py-1",children:"Payment"}),e.jsx("th",{className:"border border-gray-400 px-1 py-1",children:"Outstanding Balance"}),e.jsx("th",{className:"border border-gray-400 px-1 py-1",children:"Remarks"}),e.jsx("th",{className:"border border-gray-400 px-1 py-1",children:"Status"})]})}),e.jsx("tbody",{children:(h=a.customer_plans[0])==null?void 0:h.transactions.map(r=>{var t,n;return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:r.bill_no}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:new Date(r.date_billing).toLocaleString("default",{month:"long",year:"numeric"})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:N[(n=(t=r.description)==null?void 0:t.toLowerCase())==null?void 0:n.trim()]||r.description||"N/A"}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:new Date(r.date_billing).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:["₱",r.plan_price]}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:["₱",r.partial]}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:["₱",r.outstanding_balance]}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:r.remarks}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:r.status})]},r.id)})})]}),e.jsxs("div",{className:"grid grid-cols-3 text-center mt-12 text-sm text-gray-700",children:[e.jsx("div",{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[14px] font-semibold",children:"Prepared By:"}),e.jsx("p",{className:"text-[14px]",children:"RICKA JOY A. RIVERA"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[14px] font-semibold",children:"Checked By:"}),e.jsx("p",{className:"text-[14px]",children:"MELONY A. BARCELO"})]})]})]})})]})};export{M as default};
