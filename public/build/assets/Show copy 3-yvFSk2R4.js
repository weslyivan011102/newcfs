import{a as D,j as e,M as I,r as v}from"./app-BdyLqLlc.js";import{A as E}from"./AuthenticatedLayout-C8D8eUzt.js";import{l as P}from"./index-BzPIjsZP.js";import"./NavLink-BvgaK94k.js";import"./index-B7gYL_ii.js";const R=({transactions:s,grand_totals:n,filters:_})=>{var m,p,h,j;const d=D.useRef(),S=P.useReactToPrint({contentRef:d});console.log("high",JSON.stringify(s,null,2));const B={"n/a":"SELECT MONTH",january:"JAN BILL",february:"FEB BILL",march:"MAR BILL",april:"APR BILL",may:"MAY BILL",june:"JUN BILL",july:"JUL BILL",august:"AUG BILL",september:"SEP BILL",october:"OCT BILL",november:"NOV BILL",december:"DEC BILL"};return e.jsxs(E,{children:[e.jsx(I,{title:"Collections"}),e.jsx("div",{className:"flex justify-end px-8 mb-2",children:e.jsx(v.Button,{variant:"gradient",color:"green",onClick:()=>S(),children:"Print"})}),e.jsxs("div",{ref:d,className:"w-full px-4 mx-auto bg-white py-8 ",children:[e.jsxs("div",{className:"flex items-start justify-between border-b pb-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("img",{src:"/img/logo.png",alt:"CFS Logo",className:"w-10 h-10 object-contain"}),e.jsx("div",{className:"text-sm text-gray-800",children:e.jsx("h1",{className:"font-bold text-[10px]",children:"CFS INTERNET NETWORK SOLUTIONS"})})]}),e.jsx("div",{className:"flex space-x-4 text-right"})]}),e.jsx("div",{className:"flex justify-between items-center my-4 border-b pb-2",children:e.jsxs("div",{className:"text-[10px] text-gray-800",children:[e.jsxs("h1",{children:["Collection Report",e.jsx("span",{className:"font-semibold",children:(p=(m=s[0])==null?void 0:m.customer_plan)!=null&&p.collector?` by ${s[0].customer_plan.collector.firstname} ${s[0].customer_plan.collector.lastname}`:":"})]}),e.jsxs("p",{className:"mt-1",children:["Collection No.:"," ",e.jsx("span",{className:"font-semibold",children:(()=>{const t=new Date,x=t.getFullYear().toString().slice(-2),r=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getDate().toString().padStart(2,"0"),a=t.toISOString().split("T")[0],c=s.filter(o=>new Date(o.created_at).toISOString().split("T")[0]===a),i=String(c.length+1).padStart(2,"0");return`${x}-${r}-${l}-${i}`})()})]})]})}),e.jsx("div",{className:"flex justify-between items-center my-4 border-b pb-2",children:e.jsxs("h2",{className:"font-semibold text-gray-700 text-[10px]",children:["Collection of"," ",e.jsx("span",{children:new Date(_.start_date).toLocaleDateString("en-PH",{day:"2-digit",month:"long",year:"numeric"})})]})}),e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left text-[6px]",children:[e.jsx("th",{className:"border px-2 py-1",children:"#"}),e.jsx("th",{className:"border px-5 py-1",children:"Bill No."}),e.jsx("th",{className:"border px-2 py-1",children:"Billing Date"}),e.jsx("th",{className:"border px-2 py-1",children:"Description"}),e.jsx("th",{className:"border px-2 py-1",children:"Customer Name"}),e.jsx("th",{className:"border px-2 py-1",children:"Address"}),e.jsx("th",{className:"border px-2 py-1",children:"Payment Amount"}),e.jsx("th",{className:"border px-2 py-1",children:"Rebate"}),e.jsx("th",{className:"border px-2 py-1",children:"Balance"}),e.jsx("th",{className:"border px-2 py-1",children:"Status"}),e.jsx("th",{className:"border px-2 py-1",children:"Payment Recieved By:"})]})}),e.jsx("tbody",{children:s.length>0?s.map((t,x)=>{var r,l,a,c,i,o,b,N,y,u,g,L,f;return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-[7px]",children:x+1}),e.jsx("td",{className:"border px-2 py-1 text-[7px]",children:t.bill_no}),e.jsx("td",{className:"border px-2 py-1 text-[7px]",children:new Date(t.date_billing).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric"})}),e.jsx("td",{className:"border px-2 py-1 text-[7px]",children:B[t.description]||t.description}),e.jsxs("td",{className:"border px-2 py-1 text-[7px]",children:[(l=(r=t.customer_plan)==null?void 0:r.customer)==null?void 0:l.lastname,","," ",(c=(a=t.customer_plan)==null?void 0:a.customer)==null?void 0:c.firstname]}),e.jsxs("td",{className:"border px-0.5 py-1 text-[7px]",children:[(b=(o=(i=t.customer_plan)==null?void 0:i.customer)==null?void 0:o.purok)==null?void 0:b.purok_name,","," ",(g=(u=(y=(N=t.customer_plan)==null?void 0:N.customer)==null?void 0:y.purok)==null?void 0:u.barangay)==null?void 0:g.barangay_name]}),e.jsxs("td",{className:"border px-2 py-1  text-[7px]",children:["₱",t.partial.toLocaleString("en-PH",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"border px-2 py-1  text-[7px]",children:["₱",t.rebate.toLocaleString("en-PH",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"border px-2 py-1  text-[7px]",children:["₱",t.outstanding_balance.toLocaleString("en-PH",{minimumFractionDigits:2})]}),e.jsx("td",{className:"border px-2 py-1 text-[7px]",children:t.status}),e.jsx("td",{className:"border px-2 py-1 text-[7px]",children:(f=(L=t.customer_plan)==null?void 0:L.collector)==null?void 0:f.firstname})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"text-center py-4 text-gray-500",children:"No collection records found"})})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold text-[8px]",children:[e.jsx("td",{colSpan:"5",className:"border px-2 py-1 text-right",children:"Total Payment:"}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["₱",n.partial.toLocaleString("en-PH",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["₱",n.rebate.toLocaleString("en-PH",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["₱",n.balance.toLocaleString("en-PH",{minimumFractionDigits:2})]}),e.jsx("td",{colSpan:"2",className:"border px-2 py-1"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 text-center mt-12 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold uppercase text-[12px] underline",children:(j=(h=s[0])==null?void 0:h.customer_plan)!=null&&j.collector?`${s[0].customer_plan.collector.firstname} ${s[0].customer_plan.collector.lastname}`:"___________________"}),e.jsx("p",{className:"text-[12px]",children:"Collector:"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold uppercase text-[12px] underline",children:"MELONY A. BARCELO"}),e.jsx("p",{className:" text-[12px]",children:"Checked By:"})]})]})]})]})};export{R as default};
