import{a as s,c as g,j as e,M as D,r as x}from"./app-BdyLqLlc.js";import{d as _}from"./NavLink-BvgaK94k.js";import{a as I}from"./index-B7gYL_ii.js";import{A}from"./AuthenticatedLayout-C8D8eUzt.js";import{u as E}from"./useQuery-A8Dbsqml.js";import{U as F}from"./UseAppUrl-CjQRC-du.js";const q=()=>{const m=F(),[l,h]=s.useState(""),[c,o]=s.useState(""),[i,r]=s.useState(""),[d,f]=s.useState(""),[u,j]=s.useState(""),[y,v]=s.useState([]),p=new Date().toISOString().split("T")[0];return s.useEffect(()=>{if(l==="daily"&&(o(p),r(p)),l==="monthly"){const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),1).toISOString().split("T")[0],a=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString().split("T")[0];o(n),r(a)}if(l==="yearly"){const t=new Date,n=`${t.getFullYear()}-01-01`,a=`${t.getFullYear()}-12-31`;o(n),r(a)}},[l]),E({queryKey:["collections",1,l,c,i,d,u],queryFn:async({queryKey:t})=>{const[n,a,b,N,C,S,w]=t;return(await g.get(`${m}/api/raw_collections`,{params:{page:a,period:b,start_date:N,end_date:C,status:S,collector_id:w}})).data},keepPreviousData:!0}),s.useEffect(()=>{g.get(`${m}/api/collectors`).then(t=>{v(t.data)})},[]),e.jsxs(A,{children:[e.jsx(D,{title:"Collections"}),e.jsx("div",{className:"bg-white overflow-y-auto max-h-[590px]",children:e.jsxs("div",{className:"mt-5 px-4",children:[e.jsx(x.Typography,{variant:"lead",className:"text-lg font-bold",children:"Collections"}),e.jsx(x.Typography,{className:"text-sm",children:"Manage collections"}),e.jsxs("div",{className:"w-full bg-gray-50 p-6 rounded-xl shadow-sm mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-800 text-lg mb-4",children:"Filter Collections"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 mb-1",children:"Period"}),e.jsxs("select",{value:l,onChange:t=>h(t.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-400",children:[e.jsx("option",{value:"",children:"Custom"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:c,onChange:t=>o(t.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-400"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:i,onChange:t=>r(t.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-400"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 mb-1",children:"Collector"}),e.jsxs("select",{value:u,onChange:t=>j(t.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-400",children:[e.jsx("option",{value:"",children:"All Collectors"}),y.map(t=>e.jsxs("option",{value:t.id,children:[t.firstname," ",t.lastname]},t.id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 mb-1",children:"Status"}),e.jsxs("select",{value:d,onChange:t=>f(t.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-400",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"unpaid",children:"Unpaid"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-4 mt-6",children:e.jsx("a",{href:route("collections.show",{period:l,start_date:c,end_date:i,collector_id:u,status:d}),target:"_blank",children:e.jsxs(x.Button,{color:"blue",className:"flex items-center gap-2 px-4 py-2",children:[e.jsx(I,{}),"Preview"]})})})]}),e.jsxs("div",{className:"flex justify-center flex-col items-center mt-12",children:[e.jsx(_,{className:"text-9xl"}),"Filter to show collection"]})]})})]})};export{q as default};
