import{a as t,b as f,j as a,M as j,r as s,U as v}from"./app-BdyLqLlc.js";import{A as N,B as w}from"./AuthenticatedLayout-C8D8eUzt.js";import{S as A}from"./react-select.esm-DN-vpcAI.js";import{U as _}from"./UseAppUrl-CjQRC-du.js";import"./NavLink-BvgaK94k.js";import"./index-B7gYL_ii.js";const C=()=>{const c=_(),[i,d]=t.useState([]),[o,m]=t.useState(""),{data:u,setData:n,post:p,errors:x,reset:h,processing:y}=f({purok_name:"",barangay_id:o}),g=async e=>{e.preventDefault(),await p(route("address.store"),{onSuccess:()=>{alert("Address was added successfully!"),h()},onError:r=>{console.log(r)}})},b=async()=>{try{const e=await axios.get(`${c}/api/barangay_options`);d(e.data)}catch(e){console.error("Error fetching barangays:",e),alert("Failed to fetch barangays.")}};t.useEffect(()=>{b()},[]);const l=i.map(e=>({value:e.id.toString(),label:e.barangay_name+" - "+e.municipality.municipality_name}));return a.jsxs(N,{children:[a.jsx(j,{title:"Add Address"}),a.jsx("div",{className:"bg-white overflow-y-auto max-h-[590px] grid place-justify-center ",children:a.jsx("div",{className:"mt-2 px-4",children:a.jsx("div",{className:"mb-6 flex justify-between items-center",children:a.jsxs(s.Card,{color:"white",className:" mx-auto w-full max-w-xl  p-8 shadow-md rounded-md mt-1 mb-2",children:[a.jsx("div",{className:"flex justify-end mb-2",children:a.jsx(s.Tooltip,{content:"Back",children:a.jsx(v,{href:"/admin/address",className:"hover:bg-gray-200 px-2 py-1 rounded",children:a.jsx(w,{className:"text-xl cursor-pointer"})})})}),a.jsx(s.Typography,{variant:"h5",color:"blue-gray",className:"text-center",children:"Add Address"}),a.jsxs("form",{onSubmit:g,className:"mt-8 mb-2",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx(s.Typography,{variant:"paragraph",color:"blue-gray",className:"mb-1 ",children:"Purok Name"}),a.jsx(s.Input,{size:"md",value:u.purok_name,onChange:e=>n("purok_name",e.target.value),error:!!x.purok_name,className:"w-full"})]}),a.jsx("div",{className:" mb-3",children:a.jsxs("div",{children:[a.jsx(s.Typography,{variant:"paragraph",color:"blue-gray",className:"mb-1 ",children:"Address"}),a.jsx(A,{value:l.find(e=>e.value===o),options:l,onChange:e=>{const r=(e==null?void 0:e.value)||"";m(r),n("barangay_id",r?parseInt(r,10):null)}})]})}),a.jsx(s.Button,{type:"submit",disabled:y,className:"mt-6 w-full",color:"blue",fullWidth:!0,children:"Save"})]})]})})})})," "]})};export{C as default};
